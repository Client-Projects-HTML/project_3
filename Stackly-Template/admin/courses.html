<!DOCTYPE html>
<html lang="en" class="light" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrainComply Solutions | Admin Dashboard</title>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/svg+xml" href="../assets/images/favicon.svg">

    <!-- Charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                        heading: ['"Outfit"', 'sans-serif'],
                    },
                    colors: {
                        primary: { 50: '#eef2ff', 500: '#f59e0b', 600: '#d97706', 700: '#b45309' },
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-gray-50 dark:bg-slate-900 text-slate-600 dark:text-slate-300 font-sans">

    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside id="sidebar"
            class="w-64 bg-white dark:bg-slate-800 border-r border-gray-200 dark:border-slate-700 fixed md:static inset-y-0 left-0 z-50 transform -translate-x-full md:translate-x-0 transition-transform duration-300 flex flex-col">
            <div class="h-16 flex items-center px-4 border-b border-gray-200 dark:border-slate-700">
                <a href="../index.html" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
                    <div
                        class="w-8 h-8 bg-gradient-to-br from-primary-600 to-primary-500 rounded-lg flex items-center justify-center text-white shadow-lg shrink-0">
                        <i class="fas fa-hard-hat text-sm"></i>
                    </div>
                    <span
                        class="font-heading font-bold text-base tracking-tight text-slate-900 dark:text-white whitespace-nowrap">TrainComply<span
                            class="text-primary-600">Solutions</span></span>
                </a>
            </div>

            <nav class="flex-1 px-4 py-6 space-y-1 overflow-y-auto">
                <a href="index.html"
                    class="flex items-center gap-3 px-4 py-3 text-slate-600 dark:text-slate-400 hover:bg-gray-50 dark:hover:bg-slate-700 hover:text-slate-900 dark:hover:text-white rounded-xl font-medium transition-colors">
                    <i class="fas fa-home w-5"></i> Dashboard
                </a>
                <a href="courses.html"
                    class="flex items-center gap-3 px-4 py-3 bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 rounded-xl font-medium">
                    <i class="fas fa-graduation-cap w-5"></i> Training Courses
                </a>
                <a href="certifications.html"
                    class="flex items-center gap-3 px-4 py-3 text-slate-600 dark:text-slate-400 hover:bg-gray-50 dark:hover:bg-slate-700 hover:text-slate-900 dark:hover:text-white rounded-xl font-medium transition-colors">
                    <i class="fas fa-certificate w-5"></i> Certifications
                </a>
                <a href="employees.html"
                    class="flex items-center gap-3 px-4 py-3 text-slate-600 dark:text-slate-400 hover:bg-gray-50 dark:hover:bg-slate-700 hover:text-slate-900 dark:hover:text-white rounded-xl font-medium transition-colors">
                    <i class="fas fa-users w-5"></i> Employees
                </a>
                <a href="reports.html"
                    class="flex items-center gap-3 px-4 py-3 text-slate-600 dark:text-slate-400 hover:bg-gray-50 dark:hover:bg-slate-700 hover:text-slate-900 dark:hover:text-white rounded-xl font-medium transition-colors">
                    <i class="fas fa-file-contract w-5"></i> Compliance Reports
                </a>

                <div class="pt-6 pb-2">
                    <p class="px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider">Settings</p>
                </div>

                <a href="settings.html"
                    class="flex items-center gap-3 px-4 py-3 text-slate-600 dark:text-slate-400 hover:bg-gray-50 dark:hover:bg-slate-700 hover:text-slate-900 dark:hover:text-white rounded-xl font-medium transition-colors">
                    <i class="fas fa-cog w-5"></i> Platform Config
                </a>
                <a href="roles.html"
                    class="flex items-center gap-3 px-4 py-3 text-slate-600 dark:text-slate-400 hover:bg-gray-50 dark:hover:bg-slate-700 hover:text-slate-900 dark:hover:text-white rounded-xl font-medium transition-colors">
                    <i class="fas fa-shield-alt w-5"></i> Roles & Permissions
                </a>
            </nav>

            <div class="p-4 border-t border-gray-200 dark:border-slate-700">
                <a href="login.html"
                    class="flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-medium transition-colors">
                    <i class="fas fa-sign-out-alt w-5"></i> Logout
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col h-screen overflow-hidden relative">

            <!-- Top Header -->
            <header
                class="h-16 bg-white dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 flex items-center justify-between px-6 z-10">
                <button id="sidebarToggle"
                    class="md:hidden text-slate-500 dark:text-slate-200 hover:text-slate-700 dark:hover:text-white">
                    <i class="fas fa-bars text-xl"></i>
                </button>

                <div class="flex-1 md:flex-none"></div>

                <div class="flex items-center gap-4">
                    <button id="themeToggle"
                        class="w-10 h-10 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-500 flex items-center justify-center transition-colors">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block"></i>
                    </button>
                    <button id="rtlToggle"
                        class="w-10 h-10 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700 text-slate-500 flex items-center justify-center transition-colors font-bold text-xs">
                        RTL
                    </button>

                    <div class="relative">
                        <img src="https://ui-avatars.com/api/?name=Safety+Admin&background=4f46e5&color=fff"
                            alt="Profile"
                            class="w-10 h-10 rounded-full border-2 border-white dark:border-slate-700 shadow-sm">
                        <span
                            class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white dark:border-slate-800 rounded-full"></span>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <main class="flex-1 overflow-y-auto p-6 md:p-8">
                <div class="mb-8 flex justify-between items-end">
                    <div>
                        <h1 class="text-2xl font-bold text-slate-900 dark:text-white">Training Courses</h1>
                        <p class="text-slate-500 dark:text-slate-400 mt-1">Manage all available training modules and
                            materials.</p>
                    </div>
                </div>

                <!-- Courses Table -->
                <div
                    class="bg-white dark:bg-slate-800 rounded-2xl border border-gray-100 dark:border-slate-700 shadow-sm overflow-hidden">
                    <div class="p-6 border-b border-gray-100 dark:border-slate-700 flex justify-between items-center">
                        <h3 class="font-bold text-slate-900 dark:text-white">Active Courses</h3>
                        <button id="addCourseBtn"
                            class="flex items-center gap-2 bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium transition-all shadow-md hover:shadow-lg hover:scale-105 active:scale-95">
                            <i class="fas fa-plus"></i> Add New Course
                        </button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm text-slate-600 dark:text-slate-400">
                            <thead class="bg-gray-50 dark:bg-slate-700/50 text-slate-900 dark:text-white font-semibold">
                                <tr>
                                    <th class="px-6 py-4">Course Name</th>
                                    <th class="px-6 py-4">Category</th>
                                    <th class="px-6 py-4">Enrolled</th>
                                    <th class="px-6 py-4">Rating</th>
                                    <th class="px-6 py-4 text-right">Action</th>
                                </tr>
                            </thead>
                            <tbody id="coursesTableBody" class="divide-y divide-gray-100 dark:divide-slate-700">
                                <tr class="hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors"
                                    data-course-id="1">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">OSHA 10-Hour
                                        Construction</td>
                                    <td class="px-6 py-4"><span
                                            class="px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-bold">Safety</span>
                                    </td>
                                    <td class="px-6 py-4">1,245 Students</td>
                                    <td class="px-6 py-4 text-yellow-500"><i class="fas fa-star"></i> 4.8</td>
                                    <td class="px-6 py-4 text-right">
                                        <button
                                            class="edit-btn text-slate-400 hover:text-primary-600 px-2 py-1 rounded transition-all hover:bg-primary-50 dark:hover:bg-primary-900/20 relative group"
                                            title="Edit Course">
                                            <i class="fas fa-edit"></i>
                                            <span
                                                class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Edit
                                                Course</span>
                                        </button>
                                        <button
                                            class="delete-btn text-slate-400 hover:text-red-600 px-2 py-1 rounded transition-all hover:bg-red-50 dark:hover:bg-red-900/20 relative group"
                                            title="Delete Course">
                                            <i class="fas fa-trash"></i>
                                            <span
                                                class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Delete
                                                Course</span>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors"
                                    data-course-id="2">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Forklift Regulation
                                        Compliance</td>
                                    <td class="px-6 py-4"><span
                                            class="px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs font-bold">Equipment</span>
                                    </td>
                                    <td class="px-6 py-4">856 Students</td>
                                    <td class="px-6 py-4 text-yellow-500"><i class="fas fa-star"></i> 4.9</td>
                                    <td class="px-6 py-4 text-right">
                                        <button
                                            class="edit-btn text-slate-400 hover:text-primary-600 px-2 py-1 rounded transition-all hover:bg-primary-50 dark:hover:bg-primary-900/20 relative group"
                                            title="Edit Course">
                                            <i class="fas fa-edit"></i>
                                            <span
                                                class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Edit
                                                Course</span>
                                        </button>
                                        <button
                                            class="delete-btn text-slate-400 hover:text-red-600 px-2 py-1 rounded transition-all hover:bg-red-50 dark:hover:bg-red-900/20 relative group"
                                            title="Delete Course">
                                            <i class="fas fa-trash"></i>
                                            <span
                                                class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Delete
                                                Course</span>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors"
                                    data-course-id="3">
                                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">Electrical Safety /
                                        Arc Flash</td>
                                    <td class="px-6 py-4"><span
                                            class="px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-bold">Hazard</span>
                                    </td>
                                    <td class="px-6 py-4">632 Students</td>
                                    <td class="px-6 py-4 text-yellow-500"><i class="fas fa-star"></i> 4.7</td>
                                    <td class="px-6 py-4 text-right">
                                        <button
                                            class="edit-btn text-slate-400 hover:text-primary-600 px-2 py-1 rounded transition-all hover:bg-primary-50 dark:hover:bg-primary-900/20 relative group"
                                            title="Edit Course">
                                            <i class="fas fa-edit"></i>
                                            <span
                                                class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Edit
                                                Course</span>
                                        </button>
                                        <button
                                            class="delete-btn text-slate-400 hover:text-red-600 px-2 py-1 rounded transition-all hover:bg-red-50 dark:hover:bg-red-900/20 relative group"
                                            title="Delete Course">
                                            <i class="fas fa-trash"></i>
                                            <span
                                                class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Delete
                                                Course</span>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </main>
        </div>

        <!-- Sidebar Overlay (Mobile) -->
        <div id="sidebarOverlay"
            class="fixed inset-0 bg-black/50 z-40 hidden md:hidden glass-card backdrop-blur-sm opacity-0 transition-opacity">
        </div>
    </div>

    <!-- Add/Edit Course Modal -->
    <div id="courseModal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto transform transition-all scale-95 opacity-0"
            id="courseModalContent">
            <div
                class="p-6 border-b border-gray-200 dark:border-slate-700 flex justify-between items-center sticky top-0 bg-white dark:bg-slate-800 z-10">
                <h2 class="text-xl font-bold text-slate-900 dark:text-white" id="modalTitle">Add New Course</h2>
                <button id="closeModal"
                    class="w-8 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700 flex items-center justify-center transition-colors">
                    <i class="fas fa-times text-slate-500"></i>
                </button>
            </div>
            <form id="courseForm" class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Course Name</label>
                    <input type="text" id="courseName" required
                        class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-white transition-all"
                        placeholder="e.g., OSHA 10-Hour Construction">
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Category</label>
                    <select id="courseCategory" required
                        class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-white transition-all">
                        <option value="">Select a category</option>
                        <option value="Safety">Safety</option>
                        <option value="Equipment">Equipment</option>
                        <option value="Hazard">Hazard</option>
                        <option value="Compliance">Compliance</option>
                        <option value="Training">Training</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Enrolled
                            Students</label>
                        <input type="number" id="courseEnrolled" required min="0"
                            class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-white transition-all"
                            placeholder="0">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Rating
                            (1-5)</label>
                        <input type="number" id="courseRating" required min="1" max="5" step="0.1"
                            class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-white transition-all"
                            placeholder="4.5">
                    </div>
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="submit"
                        class="flex-1 bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 rounded-lg font-medium transition-all shadow-lg hover:shadow-xl hover:scale-105 active:scale-95">
                        <i class="fas fa-save mr-2"></i> Save Course
                    </button>
                    <button type="button" id="cancelModal"
                        class="px-6 py-3 border border-gray-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-slate-700 transition-all">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full transform transition-all scale-95 opacity-0"
            id="deleteModalContent">
            <div class="p-6 text-center">
                <div
                    class="w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-exclamation-triangle text-3xl text-red-600"></i>
                </div>
                <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-2">Delete Course?</h3>
                <p class="text-slate-600 dark:text-slate-400 mb-6">Are you sure you want to delete this course? This
                    action cannot be undone.</p>
                <div class="flex gap-3">
                    <button id="confirmDelete"
                        class="flex-1 bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium transition-all shadow-lg hover:shadow-xl hover:scale-105 active:scale-95">
                        <i class="fas fa-trash mr-2"></i> Delete
                    </button>
                    <button id="cancelDelete"
                        class="flex-1 border border-gray-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 px-6 py-3 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-slate-700 transition-all">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification"
        class="fixed top-4 right-4 z-[60] transform translate-x-[200%] transition-transform duration-300">
        <div
            class="bg-white dark:bg-slate-800 rounded-lg shadow-2xl border border-gray-200 dark:border-slate-700 p-4 flex items-center gap-3 min-w-[300px]">
            <div id="notificationIcon" class="w-10 h-10 rounded-full flex items-center justify-center">
                <i class="fas fa-check text-xl"></i>
            </div>
            <div class="flex-1">
                <p id="notificationMessage" class="font-medium text-slate-900 dark:text-white"></p>
            </div>
            <button id="closeNotification" class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-200">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Admin Logic -->
    <script>
        // Dark Mode Check
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }

        // Toggle Theme
        const themeToogles = document.querySelectorAll('#themeToggle');
        themeToogles.forEach(btn => {
            btn.addEventListener('click', () => {
                document.documentElement.classList.toggle('dark');
                if (document.documentElement.classList.contains('dark')) {
                    localStorage.theme = 'dark';
                } else {
                    localStorage.theme = 'light';
                }
            });
        });

        // RTL Toggle
        const rtlToggle = document.getElementById('rtlToggle');

        function toggleRTL() {
            const html = document.documentElement;
            const isRTL = html.getAttribute('dir') === 'rtl';
            if (isRTL) {
                html.setAttribute('dir', 'ltr');
                rtlToggle.textContent = 'RTL';
                localStorage.setItem('dir', 'ltr');
            } else {
                html.setAttribute('dir', 'rtl');
                rtlToggle.textContent = 'LTR';
                localStorage.setItem('dir', 'rtl');
            }
        }

        if (rtlToggle) {
            rtlToggle.addEventListener('click', toggleRTL);
        }

        // Initialize RTL
        if (localStorage.getItem('dir') === 'rtl') {
            document.documentElement.setAttribute('dir', 'rtl');
            if (rtlToggle) rtlToggle.textContent = 'LTR';
        }

        // Sidebar Toggle
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        function toggleSidebar() {
            const isClosed = sidebar.classList.contains('-translate-x-full');
            if (isClosed) {
                sidebar.classList.remove('-translate-x-full');
                sidebarOverlay.classList.remove('hidden');
                setTimeout(() => sidebarOverlay.classList.remove('opacity-0'), 10);
            } else {
                sidebar.classList.add('-translate-x-full');
                sidebarOverlay.classList.add('opacity-0');
                setTimeout(() => sidebarOverlay.classList.add('hidden'), 300);
            }
        }

        sidebarToggle.addEventListener('click', toggleSidebar);
        sidebarOverlay.addEventListener('click', toggleSidebar);

        // ===== COURSE MANAGEMENT FUNCTIONALITY =====

        let editingCourseId = null;
        let deletingCourseRow = null;
        let courseIdCounter = 4; // Start from 4 since we have 3 courses

        // Category color mapping
        const categoryColors = {
            'Safety': 'bg-blue-100 text-blue-700',
            'Equipment': 'bg-orange-100 text-orange-700',
            'Hazard': 'bg-red-100 text-red-700',
            'Compliance': 'bg-green-100 text-green-700',
            'Training': 'bg-purple-100 text-purple-700'
        };

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const icon = document.getElementById('notificationIcon');
            const messageEl = document.getElementById('notificationMessage');

            messageEl.textContent = message;

            if (type === 'success') {
                icon.className = 'w-10 h-10 rounded-full flex items-center justify-center bg-green-100 dark:bg-green-900/30 text-green-600';
                icon.innerHTML = '<i class="fas fa-check text-xl"></i>';
            } else if (type === 'error') {
                icon.className = 'w-10 h-10 rounded-full flex items-center justify-center bg-red-100 dark:bg-red-900/30 text-red-600';
                icon.innerHTML = '<i class="fas fa-times text-xl"></i>';
            }

            notification.classList.remove('translate-x-[200%]');
            notification.classList.add('translate-x-0');

            setTimeout(() => {
                notification.classList.remove('translate-x-0');
                notification.classList.add('translate-x-[200%]');
            }, 3000);
        }

        document.getElementById('closeNotification').addEventListener('click', () => {
            document.getElementById('notification').classList.add('translate-x-[200%]');
        });

        // Modal functions
        function openModal(isEdit = false, courseData = null) {
            const modal = document.getElementById('courseModal');
            const modalContent = document.getElementById('courseModalContent');
            const modalTitle = document.getElementById('modalTitle');

            modalTitle.textContent = isEdit ? 'Edit Course' : 'Add New Course';

            if (isEdit && courseData) {
                document.getElementById('courseName').value = courseData.name;
                document.getElementById('courseCategory').value = courseData.category;
                document.getElementById('courseEnrolled').value = courseData.enrolled;
                document.getElementById('courseRating').value = courseData.rating;
                editingCourseId = courseData.id;
            } else {
                document.getElementById('courseForm').reset();
                editingCourseId = null;
            }

            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('courseModal');
            const modalContent = document.getElementById('courseModalContent');

            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');

            setTimeout(() => {
                modal.classList.remove('flex');
                modal.classList.add('hidden');
                document.getElementById('courseForm').reset();
                editingCourseId = null;
            }, 200);
        }

        // Add course button
        document.getElementById('addCourseBtn').addEventListener('click', () => {
            openModal(false);
        });

        // Close modal buttons
        document.getElementById('closeModal').addEventListener('click', closeModal);
        document.getElementById('cancelModal').addEventListener('click', closeModal);
        document.getElementById('courseModal').addEventListener('click', (e) => {
            if (e.target.id === 'courseModal') closeModal();
        });

        // Course form submission
        document.getElementById('courseForm').addEventListener('submit', (e) => {
            e.preventDefault();

            const name = document.getElementById('courseName').value;
            const category = document.getElementById('courseCategory').value;
            const enrolled = document.getElementById('courseEnrolled').value;
            const rating = document.getElementById('courseRating').value;

            if (editingCourseId) {
                // Edit existing course
                const row = document.querySelector(`tr[data-course-id="${editingCourseId}"]`);
                if (row) {
                    row.querySelector('.font-medium').textContent = name;
                    row.querySelector('span').className = `px-2 py-1 rounded text-xs font-bold ${categoryColors[category]}`;
                    row.querySelector('span').textContent = category;
                    row.querySelectorAll('td')[2].textContent = `${enrolled} Students`;
                    row.querySelectorAll('td')[3].innerHTML = `<i class="fas fa-star"></i> ${rating}`;

                    showNotification('Course updated successfully!', 'success');
                }
            } else {
                // Add new course
                const tbody = document.getElementById('coursesTableBody');
                const newRow = document.createElement('tr');
                newRow.className = 'hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors';
                newRow.setAttribute('data-course-id', courseIdCounter);

                newRow.innerHTML = `
                    <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">${name}</td>
                    <td class="px-6 py-4"><span class="px-2 py-1 rounded text-xs font-bold ${categoryColors[category]}">${category}</span></td>
                    <td class="px-6 py-4">${enrolled} Students</td>
                    <td class="px-6 py-4 text-yellow-500"><i class="fas fa-star"></i> ${rating}</td>
                    <td class="px-6 py-4 text-right">
                        <button class="edit-btn text-slate-400 hover:text-primary-600 px-2 py-1 rounded transition-all hover:bg-primary-50 dark:hover:bg-primary-900/20 relative group" title="Edit Course">
                            <i class="fas fa-edit"></i>
                            <span class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Edit Course</span>
                        </button>
                        <button class="delete-btn text-slate-400 hover:text-red-600 px-2 py-1 rounded transition-all hover:bg-red-50 dark:hover:bg-red-900/20 relative group" title="Delete Course">
                            <i class="fas fa-trash"></i>
                            <span class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Delete Course</span>
                        </button>
                    </td>
                `;

                tbody.appendChild(newRow);
                courseIdCounter++;

                showNotification('Course added successfully!', 'success');
            }

            closeModal();
        });

        // Edit and Delete button handlers (using event delegation)
        document.getElementById('coursesTableBody').addEventListener('click', (e) => {
            const editBtn = e.target.closest('.edit-btn');
            const deleteBtn = e.target.closest('.delete-btn');

            if (editBtn) {
                const row = editBtn.closest('tr');
                const courseId = row.getAttribute('data-course-id');
                const name = row.querySelector('.font-medium').textContent.trim();
                const category = row.querySelector('span').textContent.trim();
                const enrolled = row.querySelectorAll('td')[2].textContent.replace(' Students', '').trim();
                const rating = row.querySelectorAll('td')[3].textContent.split(' ')[1];

                openModal(true, { id: courseId, name, category, enrolled, rating });
            }

            if (deleteBtn) {
                const row = deleteBtn.closest('tr');
                deletingCourseRow = row;
                openDeleteModal();
            }
        });

        // Delete modal functions
        function openDeleteModal() {
            const modal = document.getElementById('deleteModal');
            const modalContent = document.getElementById('deleteModalContent');

            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        function closeDeleteModal() {
            const modal = document.getElementById('deleteModal');
            const modalContent = document.getElementById('deleteModalContent');

            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');

            setTimeout(() => {
                modal.classList.remove('flex');
                modal.classList.add('hidden');
                deletingCourseRow = null;
            }, 200);
        }

        document.getElementById('confirmDelete').addEventListener('click', () => {
            if (deletingCourseRow) {
                deletingCourseRow.style.opacity = '0';
                deletingCourseRow.style.transform = 'translateX(-20px)';
                setTimeout(() => {
                    deletingCourseRow.remove();
                    showNotification('Course deleted successfully!', 'success');
                }, 300);
            }
            closeDeleteModal();
        });

        document.getElementById('cancelDelete').addEventListener('click', closeDeleteModal);
        document.getElementById('deleteModal').addEventListener('click', (e) => {
            if (e.target.id === 'deleteModal') closeDeleteModal();
        });
    </script>
</body>

</html>